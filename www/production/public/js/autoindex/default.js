const table=document.getElementById("table"),tableLinks=table.querySelectorAll("td a"),textFileExtensions=[".txt",".log",".md"];function isTextFile(e){return textFileExtensions.some((t=>e.toLowerCase().endsWith(t)))}function createImage(e){const t=document.createElement("img");return t.src=`/images/flaticon/${e}`,t.classList.add("link-img"),t}function formatDateTime(e){const t=new Date(e),o=navigator.language||navigator.languages[0];return new Intl.DateTimeFormat(o,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}).format(t)}function formatFileSize(e){return e>=1e6?(e/1e6).toFixed(2)+" MB":e>=1e3?(e/1e3).toFixed(2)+" KB":e+" B"}function applyLinkStyles(e,t,o){e.style.color=t;const n=createImage(o);e.insertBefore(n,e.firstChild)}function updateFileSizeAndTime(e){const t=e.closest("tr").querySelector(".size");if(t){const e=t.textContent.trim();t.textContent="-"!==e?formatFileSize(parseFloat(e)):e}const o=e.closest("tr").querySelector(".time");if(o){const e=o.textContent.trim();o.textContent=formatDateTime(e)}}tableLinks.forEach((e=>{const t=e.getAttribute("href"),o=e.textContent.trim();e.href=e.href.replace(/%20/g,"_").replace(".md",""),t.endsWith("/")?applyLinkStyles(e,"blue","back.png"):o.endsWith("/")?applyLinkStyles(e,"yellow","open-folder.png"):isTextFile(o)?(applyLinkStyles(e,"cyan","word.png"),e.href=e.href.replace("/markdown/","/viewer/")):o.endsWith(".conf")?(applyLinkStyles(e,"cyan","file.png"),e.href=e.href.replace("/markdown/","/viewer/")):applyLinkStyles(e,"red","unknown-mail.png"),e.insertAdjacentText("afterbegin"," "),updateFileSizeAndTime(e)}));const toggleWidthButton=document.getElementById("toggleWidthButton");let tableWidth=null!==localStorage.getItem("tableWidth");const savedTableWidth=localStorage.getItem("tableWidth");function updateTableWidth(){toggleWidthButton.style.backgroundColor=tableWidth?"green":"blue"}table.style.width=savedTableWidth||"100%",updateTableWidth(),toggleWidthButton.addEventListener("click",(()=>{const e="100%"!==table.style.width?"100%":null;table.style.width=e,tableWidth="100%"===e,localStorage.setItem("tableWidth",e),updateTableWidth()}));const toggleCompactModeButton=document.getElementById("toggleCompactModeButton");let compactMode="true"===localStorage.getItem("compactMode");function updateCompactMode(){compactMode?(table.classList.add("not-compact-mode"),toggleCompactModeButton.style.backgroundColor="blue"):(table.classList.remove("not-compact-mode"),toggleCompactModeButton.style.backgroundColor="green")}updateCompactMode(),toggleCompactModeButton.addEventListener("click",(()=>{compactMode=!compactMode,localStorage.setItem("compactMode",compactMode),updateCompactMode()}));const reloadPageBtn=document.getElementById("reloadPage");reloadPageBtn.addEventListener("click",(()=>window.location.reload()));