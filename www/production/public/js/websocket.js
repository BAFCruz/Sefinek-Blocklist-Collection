const socket=new WebSocket(WEBSOCKET);function updateStats(t,s){const e=document.getElementById(`stats-content-${t}`);if(e){const t=e.textContent,o=s.toLocaleString();if(t===o)return;e.textContent=o,e.classList.add("stats-updated"),setTimeout((()=>{e.classList.remove("stats-updated")}),1e3)}}socket.onopen=()=>{console.log("WebSocket connection established.")},socket.onmessage=t=>{const s=JSON.parse(t.data);updateStats("all-requests",s.stats.requests.all),updateStats("blocklist-requests",s.stats.requests.blocklist),updateStats("127001",s.stats.requests[127001]),updateStats("00000",s.stats.requests["00000"]),updateStats("adguard",s.stats.requests.adguard),updateStats("dnsmasq",s.stats.requests.dnsmasq),updateStats("noip",s.stats.requests.noip),updateStats("404",s.stats.responses[404]),updateStats("429",s.stats.responses[429]),updateStats("500",s.stats.responses[500]),updateStats("503",s.stats.responses[503]),updateStats("uptime",s.uptime),updateStats("coll-cAt",s.coll.createdAt),updateStats("coll-uAt",s.coll.updatedAt),updateStats("cpu-load",s.cpuUsage)},socket.onclose=t=>{t.wasClean?console.log("WebSocket connection was closed gracefully."):console.error("WebSocket connection was unexpectedly closed."),console.log("Closing code: "+t.code),console.log("Reason for closing: "+t.reason)},socket.onerror=t=>{console.error("WebSocket connection error: "+t.message)};