const parser=require("cron-parser"),{version:version}=require("../../../package.json"),Marked=require("marked"),{readFile:readFile}=require("node:fs/promises"),path=require("node:path");Marked.use({pedantic:!1,gfm:!0});const changelog=path.join(__dirname,"..","..","docs","changelog.md"),tz={tz:"Europe/Warsaw"};exports.index=(e,r)=>{r.render("index.ejs",{version:version})},exports.changelog=async(e,r)=>{const n=await readFile(changelog,"utf8"),s=Marked.parse(n);r.render("changelog.ejs",{version:version,html:s})},exports.api=(e,r)=>{r.render("api.ejs",{version:version})},exports.updateFrequency=(e,r)=>{const n=parser.parseExpression("0 */2 * * *",tz),s=parser.parseExpression("0 1,6 * * *",tz);r.render("update-frequency.ejs",{cron:{github:n.next().toISOString(),remote:s.next().toISOString()},version:version})};